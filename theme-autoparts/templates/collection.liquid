<div class="container" style="padding:20px 0">
  <h1>{{ collection.title }}</h1>
  {% if collection.description != blank %}<div class="rte">{{ collection.description }}</div>{% endif %}

  <div class="filters" data-filters-root>
    <fieldset>
      <legend style="font-weight:600">Marque</legend>
      {% assign vendors = '' %}
      {% for p in collection.products %}
        {% unless vendors contains p.vendor %}{% assign vendors = vendors | append: p.vendor | append: ',' %}{% endunless %}
      {% endfor %}
      {% assign vendors = vendors | split: ',' | uniq %}
      {% for v in vendors %}
        {% if v != blank %}<label><input type="checkbox" name="vendor" value="{{ v }}"> {{ v }}</label>{% endif %}
      {% endfor %}
    </fieldset>
    <fieldset>
      <legend style="font-weight:600">Prix max</legend>
      <input id="price-range" type="range" min="0" max="1000" step="10" value="0">
    </fieldset>
    <fieldset>
      <legend style="font-weight:600">Avis min</legend>
      <input id="rating-min" type="number" min="0" max="5" step="1" value="0" style="width:60px">
    </fieldset>
  </div>

  {% paginate collection.products by 24 %}
    <div class="product-grid">
      {% for product in collection.products %}
        {% assign price_number = product.price | divided_by: 100.0 %}
        <article class="card" data-product-card data-vendor="{{ product.vendor }}" data-type="{{ product.type }}" data-price="{{ price_number }}" data-rating="{{ product.metafields.reviews.rating.value | default: 0 }}">
          <a class="media" href="{{ product.url }}">
            <img src="{{ product | img_url: '540x' }}" alt="{{ product.title | escape }}">
          </a>
          <div>
            <div style="font-weight:600">{{ product.title }}</div>
            <div class="price">{{ product.price | money }}</div>
          </div>
          <form class="add-to-cart" method="post" action="/cart/add">
            <input type="hidden" name="id" value="{{ product.selected_or_first_available_variant.id }}">
            <button class="btn" type="submit">Ajouter au panier</button>
          </form>
          <div class="quick-actions">
            <button class="icon-btn" type="button" aria-label="Ajouter aux favoris" data-wishlist data-handle="{{ product.handle }}">‚ù§</button>
          </div>
        </article>
      {% endfor %}
    </div>
    <div style="text-align:center;margin-top:14px">{{ paginate | default_pagination }}</div>
  {% endpaginate %}
</div>

